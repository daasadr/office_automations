@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light mode (default) */
  :root {
    --background: 0 0% 100%;
    --foreground: 20 10% 5%;
    --card: 0 0% 100%;
    --card-foreground: 20 10% 5%;
    --popover: 0 0% 100%;
    --popover-foreground: 20 10% 5%;
    --primary: 24 95% 50%;
    --primary-foreground: 60 9.1% 97.8%;
    --secondary: 24 10% 93%;
    --secondary-foreground: 20 10% 5%;
    --muted: 24 10% 93%;
    --muted-foreground: 20 10% 40%;
    --accent: 24 10% 93%;
    --accent-foreground: 20 10% 5%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 20 5.9% 90%;
    --input: 20 5.9% 90%;
    --ring: 24 95% 50%;
    --radius: 0.5rem;
  }

  /* Dark mode - automatically applied when system prefers dark */
  @media (prefers-color-scheme: dark) {
    :root {
      --background: 20 10% 5%;
      --foreground: 60 9.1% 97.8%;
      --card: 20 10% 5%;
      --card-foreground: 60 9.1% 97.8%;
      --popover: 20 10% 5%;
      --popover-foreground: 60 9.1% 97.8%;
      --primary: 24 95% 50%;
      --primary-foreground: 60 9.1% 97.8%;
      --secondary: 24 30% 15%;
      --secondary-foreground: 60 9.1% 97.8%;
      --muted: 24 30% 15%;
      --muted-foreground: 24 10% 70%;
      --accent: 24 30% 15%;
      --accent-foreground: 60 9.1% 97.8%;
      --destructive: 0 62.8% 30.6%;
      --destructive-foreground: 60 9.1% 97.8%;
      --border: 24 30% 15%;
      --input: 24 30% 15%;
      --ring: 24 95% 50%;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Additional accessibility styles */
@layer base {
  /* Focus management for accessibility */
  :focus-visible {
    @apply outline-2 outline-ring outline-offset-2;
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* High contrast support for both light and dark modes */
  @media (prefers-contrast: high) {
    :root {
      --border: 0 0% 0%;
      --input: 0 0% 0%;
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --border: 0 0% 100%;
        --input: 0 0% 100%;
        --foreground: 0 0% 100%;
        --background: 0 0% 0%;
      }
    }
  }
}

/* Custom utility classes layer for reusable patterns */
@layer utilities {
  /* Skip link for screen readers - accessible navigation */
  .skip-link {
    @apply absolute -top-40 left-6 bg-primary text-primary-foreground px-2 py-1 rounded z-50 transition-all;
  }

  .skip-link:focus {
    @apply top-6;
  }

  /* Page content container - common layout wrapper */
  .page-content {
    @apply w-full max-w-7xl mx-auto py-8;
  }

  /* Card utilities - reusable card patterns */
  .card-elevated {
    @apply bg-card text-card-foreground rounded-lg shadow-lg p-6 border border-border;
  }

  .card-flat {
    @apply bg-card text-card-foreground rounded-lg p-6 border border-border;
  }

  /* Button reset - for custom button styling */
  .btn-reset {
    @apply appearance-none border-none bg-transparent p-0 m-0 cursor-pointer;
  }

  /* Centered container utilities */
  .center-xy {
    @apply flex items-center justify-center;
  }

  .center-x {
    @apply flex justify-center;
  }

  .center-y {
    @apply flex items-center;
  }

  /* Text utilities for common patterns */
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Loading spinner utility */
  .spinner {
    @apply inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent motion-reduce:animate-[spin_1.5s_linear_infinite];
  }

  /* Focus ring utility for interactive elements */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  /* Truncate utilities */
  .truncate-2 {
    @apply overflow-hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .truncate-3 {
    @apply overflow-hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
  }

  /* Scroll area utilities */
  .scroll-area {
    @apply overflow-auto scrollbar-thin scrollbar-thumb-muted scrollbar-track-background;
  }

  /* Glass morphism effect */
  .glass {
    @apply bg-background/80 backdrop-blur-sm border border-border;
  }

  /* Gradient text utility */
  .gradient-text {
    @apply bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent;
  }
}
---
import ProgressIndicator from "./components/ProgressIndicator.astro";

export interface Props {
  title: string;
  description?: string;
  currentStep?: "welcome" | "upload" | "check" | "processing" | "download";
}

const { title, description = "Aplikace pro zpracování souborů", currentStep } = Astro.props;
---

<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    
    <!-- Import global styles -->
    <link rel="stylesheet" href="/src/styles/globals.css" />
    
    <!-- View transitions for modern browsers -->
    <meta name="view-transition" content="same-origin" />
    
    <!-- Minimal additional styles for progressive enhancement -->
    <style>
      /* View transition animations */
      @view-transition {
        navigation: auto;
      }
      
      /* Fallback animation for older browsers */
      @media (prefers-reduced-motion: no-preference) {
        .page-content {
          animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
          from {
            transform: translateX(20px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      }
      
      /* Skip link styles */
      .skip-link {
        position: absolute;
        left: -9999px;
        z-index: 999;
        padding: 1em;
        background-color: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        text-decoration: none;
        border-radius: 0.25rem;
      }
      
      .skip-link:focus {
        left: 1em;
        top: 1em;
      }
      
      /* Print styles */
      @media print {
        .progress-indicator {
          display: none;
        }
      }
    </style>
  </head>
  
  <body class="min-h-screen bg-background font-sans antialiased">
    <!-- Skip link for screen readers -->
    <a href="#main-content" class="skip-link">Přeskočit na hlavní obsah</a>
    
    <div class="container mx-auto px-4 flex-1 flex flex-col">
      <!-- Progress indicator -->
      <ProgressIndicator currentStep={currentStep} />
      
      <!-- Main content -->
      <main id="main-content" class="page-content flex-1" role="main">
        <slot />
      </main>
    </div>
    
    <!-- Progressive enhancement JavaScript -->
    <script>
      import { initializeLayoutUtils } from './utils';
      
      // Initialize all layout utilities
      initializeLayoutUtils();
    </script>
  </body>
</html>

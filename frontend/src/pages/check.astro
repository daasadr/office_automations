---
import BaseLayout from "../layouts/BaseLayout.astro";
import { ValidationStatusPoller } from "../components/ValidationStatusPoller";

// Get document UUID or job ID from query parameters
const documentId = Astro.url.searchParams.get("doc") ?? undefined;
const jobId = Astro.url.searchParams.get("job") ?? undefined;

// If neither is present, redirect to upload page
if (!documentId && !jobId) {
  return Astro.redirect("/upload", 302);
}
---

<BaseLayout title="Kontrola dokumentu" currentStep="check">
  <div class="container mx-auto py-8">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold tracking-tight mb-4">Kontrola dokumentu</h1>
      <p class="text-lg text-muted-foreground">
        Výsledky analýzy vašeho PDF dokumentu
      </p>
    </div>
    
    <ValidationStatusPoller 
      client:load
      documentId={documentId}
      jobId={jobId}
    />
  </div>
</BaseLayout>


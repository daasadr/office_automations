---
import { Home, Settings } from "lucide-react";
import "./top-bar.scss";
import { withBasePath } from "@/lib/utils";

// Get current path and normalize it (remove base path and trailing slashes)
const currentPath = Astro.url.pathname.replace(/\/$/, "");
const basePath = import.meta.env.BASE_URL?.replace(/\/$/, "") || "";
const normalizedPath = currentPath.replace(basePath, "") || "/";

// Show back button only if not on root page
const showBackButton = normalizedPath !== "/";
---

<header class="top-bar">
  <div class="top-bar__container container mx-auto px-2 py-2">
    <!-- Home icon - returns to root page -->
    <a
      href={withBasePath("/")}
      class="top-bar__icon"
      aria-label="Zpět na úvodní stránku"
      title="Domů"
    >
      <Home className="top-bar__icon-svg" />
      {showBackButton && <span class="pl-2">Zpět</span>}
    </a>

    <!-- Settings icon -->
    <a
      href={withBasePath("/settings")}
      class="top-bar__icon"
      aria-label="Nastavení"
      title="Nastavení"
    >
      <Settings className="top-bar__icon-svg" />
    </a>
  </div>
</header>
